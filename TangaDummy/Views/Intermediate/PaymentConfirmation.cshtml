@model IEnumerable<TangaDummy.Models.ApplicationUser>
@{
    ViewBag.Title = "PaymentConfirmation";
}
<style>
    #wrapper {
        display: flex;
    }

    #left {
        flex: 0 0 65%;
    }

    #right {
        flex: 1;
    }
</style>
<h2>Payment Confirmation</h2>
<div id="IDNo">
    @ViewData["ApplicationUser"].ToString()
</div>
<div id="CheckID">
    @ViewData["CheckOutID"].ToString()
</div>

<div id="wrapper">
    <div id="left">
        <img id="myPic" src="~/Images/pleasewait.gif" alt="Alternate Text" />
    </div>
    <div id="right">
        <div>Awaiting payment confirmation</div>
    </div>
</div>
@section scripts {
    <!--Script references. -->
    <!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->
    <!--Reference the SignalR library. -->
    <script src="~/Scripts/jquery.signalR-2.3.0.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="/signalr/hubs"></script>
    <!--SignalR script to update the chat page and send messages.-->
    <script>
        $(function () {
            // Reference the auto-generated proxy for the hub.
            var chat = $.connection.paymentConfirmationHub;
            console.log("pangash!!");
            console.log($('#IDNo').val());
            // Create a function that the hub can call back to display messages.
            chat.client.addNewMessageToPage = function (name, message, rcode) {
                // Add the message to the page.
                if (rcode.trim() == "0") {
                    document.getElementById("myPic").src = "Images/tick-gif.gif";
                }
                else {
                    document.getElementById("myPic").src = "Images/Cancel.png";
                }
                $('#right').append('<br />');
                $('#right').append('<br />');
                $('#right').append('<br />');
                $('#right').append('<li><strong>' + htmlEncode(name)
                    + '</strong>: ' + htmlEncode(message) + '</li>');
            };

            // Start the connection.
            $.connection.hub.start().done(function () {
                // Call the Send method on the hub.
                console.log("Shallup");
                /**/
                chat.server.send(document.getElementById("IDNo").innerHTML.trim(), document.getElementById("CheckID").innerHTML.trim(), $.connection.hub.id);
        /**/
            });
});
// This optional function html-encodes messages for display in the page.
function htmlEncode(value) {
    var encodedValue = $('<div />').text(value).html();
    return encodedValue;
}
    </script>
}